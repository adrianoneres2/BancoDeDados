SELECT * FROM NLS_DATABASE_PARAMETERS;
SELECT * FROM V$INSTANCE;
SELECT * FROM V$DATABASE;
select * from dba_directories;
select * from dba_users;
SELECT * FROM DBA_DATA_FILES WHERE TABLESPACE_NAME IN('TD_DBPLATAFORMA', 'TD_DBPESSOA', 'TD_DBGERAL', 'TI_DBPLATAFORMA', 'TI_DBPESSOA', 'TI_DBGERAL');

---------- CRIA TABLESPACES ----------------
CREATE TABLESPACE TD_DBPLATAFORMA DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;
CREATE TABLESPACE TI_DBPLATAFORMA DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;

CREATE TABLESPACE TD_DBPLATAFORMA_31 DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;
CREATE TABLESPACE TI_DBPLATAFORMA_31 DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;

CREATE TABLESPACE TD_DBGERAL DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;
CREATE TABLESPACE TI_DBGERAL DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;

CREATE TABLESPACE TD_DBPESSOA DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;
CREATE TABLESPACE TI_DBPESSOA DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;


CREATE TABLESPACE TD_DBCNES DATAFILE SIZE 100M AUTOEXTEND ON NEXT 200M MAXSIZE UNLIMITED;

---------- CRIA USUARIOS/SCHEMAS ----------------
CREATE USER DBGERAL IDENTIFIED BY DBGERAL DEFAULT TABLESPACE TD_DBGERAL TEMPORARY TABLESPACE TEMP QUOTA UNLIMITED ON TD_DBGERAL PROFILE DEFAULT;
CREATE USER DBPLATAFORMABR IDENTIFIED BY DBPLATAFORMABR DEFAULT TABLESPACE TD_DBPLATAFORMA TEMPORARY TABLESPACE TEMP QUOTA UNLIMITED ON TD_DBPLATAFORMA PROFILE DEFAULT;
CREATE USER DBPESSOA IDENTIFIED BY DBPESSOA DEFAULT TABLESPACE TD_DBPESSOA TEMPORARY TABLESPACE TEMP QUOTA UNLIMITED ON TD_DBPESSOA PROFILE DEFAULT;
CREATE USER DBCNES IDENTIFIED BY DBCNES DEFAULT TABLESPACE TD_DBCNES TEMPORARY TABLESPACE TEMP QUOTA UNLIMITED ON TD_DBCNES PROFILE DEFAULT;

---------- PERMISSOES DE USUARIO/SCHEMAS ----------------
GRANT CREATE TABLE, CREATE PROCEDURE, CREATE DATABASE LINK, RESOURCE, CREATE SESSION TO DBGERAL, DBPLATAFORMABR, DBPESSOA;
GRANT CREATE TABLE, CREATE PROCEDURE, CREATE DATABASE LINK, RESOURCE, CREATE SESSION TO DBPLATAFORMABR_31;
GRANT CREATE TABLE, CREATE PROCEDURE, CREATE DATABASE LINK, RESOURCE, CREATE SESSION TO DBCNES;


----------- AJUSTES APÓS IMPORTAÇÃO DOS SCHEMAS -------------
SELECT DISTINCT 'GRANT REFERENCES ON DBGERAL.'|| TABLE_NAME||' TO DBPLATAFORMABR, DBPLATAFORMABR_31;' 
FROM DBA_TAB_COLUMNS WHERE OWNER = 'DBGERAL';

SELECT DISTINCT 'GRANT REFERENCES ON DBPESSOA.'|| TABLE_NAME||' TO DBPLATAFORMABR, DBPLATAFORMABR_31;' 
FROM DBA_TAB_COLUMNS WHERE OWNER = 'DBPESSOA';


SELECT DISTINCT 'GRANT SELECT ON DBGERAL.'|| TABLE_NAME||' TO DBPLATAFORMABR, DBPLATAFORMABR_31;' 
FROM DBA_TAB_COLUMNS WHERE OWNER = 'DBGERAL';

SELECT DISTINCT 'GRANT SELECT ON DBPESSOA.'|| TABLE_NAME||' TO DBPLATAFORMABR, DBPLATAFORMABR_31;' 
FROM DBA_TAB_COLUMNS WHERE OWNER = 'DBPESSOA';